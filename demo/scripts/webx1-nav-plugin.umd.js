!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e=e||self).webx1NavPlugin=t()}(this,function(){var e="webx1NavPlugin",t={activeClassName:"active",historyKey:e+"History"};return{name:e,install:function(a,o){var r=Object.assign({},t,o),n=a.routeInit,s=a.unmountRoute,i=a.boot,u=r.scope?document.querySelector(r.scope):a.el;a.routeInit=function(t,o){try{var s=function(){if(a.routes&&0!==Object.keys(a.routes)){var e=Object.keys(a.routes).reduce(function(e,t){var o=a.routes[t];return o.name&&(e[o.name]={root:o.root,path:t,activeClass:o.activeClass||r.activeClassName}),e},{});[].slice.call(u.querySelectorAll("a[data-route]")).forEach(function(t){var o=e[t.dataset.route];o&&(t.dataset.isBound||(t.dataset.activeClass=o.activeClass||r.activeClassName,t.addEventListener("click",function(t){var o=t.target.dataset.route;if(o){t.preventDefault();var n=e[o],s=n.activeClass,c=n.root;if(n.path){var l=t.target.href,f=l.replace(window.location.origin,"");window.history.pushState({},f,l),a.navigate(t.target.pathname);var d=a.getState(r.historyKey)||[];d.push({path:t.target.pathname,route:o,fromRoute:a.routes[i]?a.routes[i].name:i,timestamp:Date.now()}),a.setState(r.historyKey,d),r.session&&sessionStorage.setItem(r.historyKey,JSON.stringify(d));var v=c?u.querySelector('[data-route="'+c+'"]'):t.target;if(v){var m=s||r.activeClassName;v.dataset.activeClass=m,v.classList.add(m)}}}}),r.onPrefetch&&"function"==typeof r.onPrefetch&&t.addEventListener("mouseenter",function(t){var o=t.target.dataset.route;if(o){var n=e[o].path;r.onPrefetch(a.routes[n],o,n)}}),t.dataset.isBound=!0))})}},i=a._currentRoute,c=function(e,r){try{var s=Promise.resolve(n.call(a,t,o)).then(function(){})}catch(e){return r(e)}return s&&s.then?s.then(void 0,r):s}(0,function(t){console.error("["+e+"] Init route failed!"),r.onPluginFailed&&r.onPluginFailed(t)});return Promise.resolve(c&&c.then?c.then(s):s())}catch(e){return Promise.reject(e)}},a.unmountRoute=function(t,o){try{s.call(a,t,o)}catch(t){console.error("["+e+"] Unmount route failed!",t),r.onPluginFailed&&r.onPluginFailed(t)}[].slice.call(u.querySelectorAll("a[data-route]")).forEach(function(e){e.classList.remove(e.dataset.activeClass||r.activeClassName)})},a.boot=function(){try{return Promise.resolve(i.call(a)).then(function(){var e=a.routes[a._currentRoute],t=[{path:window.location.pathname,route:e?e.name:null,fromRoute:null,timestamp:Date.now()}];if(r.session){var o=sessionStorage.getItem(r.historyKey);o&&(t=[].concat(JSON.parse(o),t))}if(a.setState(r.historyKey,t),e){var n=u.querySelector('[data-route="'+(e.root?e.root:e.name)+'"]'),s=e.activeClass||r.activeClassName;n&&(n.classList.add(s),n.dataset.activeClass=s)}})}catch(e){return Promise.reject(e)}},r.installed&&"function"==typeof r.installed&&r.installed()}}});
//# sourceMappingURL=webx1-nav-plugin.umd.js.map
